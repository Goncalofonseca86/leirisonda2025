<!doctype html>
<html lang="pt">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/leirisonda-logo.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- PWA Meta Tags - Force iOS app behavior -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="apple-mobile-web-app-title" content="Leirisonda" />
    <meta name="application-name" content="Leirisonda" />
    <meta name="theme-color" content="#007784" />
    <meta
      name="description"
      content="Sistema de gest√£o de obras e manuten√ß√£o de piscinas da Leirisonda"
    />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-touch-fullscreen" content="yes" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />

    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json" crossorigin="use-credentials" />

    <!-- iOS Splash Screens -->
    <link
      rel="apple-touch-startup-image"
      media="screen and (device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
      href="/apple-splash-2796-1290.jpg"
    />

    <title>Leirisonda - Gest√£o de Obras</title>

    <script>
      // Script super agressivo para interceptar React
      console.log("üöÄ Script interceptor do React iniciado");

      // Intercepta createElement do React
      let originalCreateElement;
      let isReactReady = false;

      function interceptReact() {
        if (
          window.React &&
          window.React.createElement &&
          !originalCreateElement
        ) {
          originalCreateElement = window.React.createElement;

          window.React.createElement = function (type, props, ...children) {
            // Intercepta elementos que contenham DIAGN√ìSTICO
            if (
              children &&
              children.some &&
              children.some(
                (child) =>
                  typeof child === "string" && child.includes("DIAGN√ìSTICO"),
              )
            ) {
              console.log("üóëÔ∏è Bloqueando cria√ß√£o de elemento DIAGN√ìSTICO");
              return null; // N√£o cria o elemento
            }

            // Intercepta elementos que contenham ADMINISTRA√á√ÉO e modifica
            if (
              children &&
              children.some &&
              children.some(
                (child) =>
                  typeof child === "string" && child.includes("ADMINISTRA√á√ÉO"),
              )
            ) {
              console.log("‚≠ê Modificando elemento ADMINISTRA√á√ÉO");

              // Adiciona estilos ao props
              const newProps = {
                ...props,
                style: {
                  ...((props && props.style) || {}),
                  background:
                    "linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)",
                  borderRadius: "12px",
                  padding: "16px",
                  margin: "8px",
                  color: "#1f2937",
                  fontWeight: "bold",
                  boxShadow: "0 4px 20px rgba(251, 191, 36, 0.3)",
                },
              };

              return originalCreateElement.call(
                this,
                type,
                newProps,
                ...children,
              );
            }

            return originalCreateElement.call(this, type, props, ...children);
          };

          console.log("‚úÖ React.createElement interceptado");
          isReactReady = true;
        }
      }

      // Fun√ß√£o de modifica√ß√£o DOM tradicional
      function modificarDOM() {
        const elementos = document.querySelectorAll("*");
        let modificacoes = 0;

        elementos.forEach((elemento) => {
          const texto = elemento.textContent || "";

          // Esconde DIAGN√ìSTICO
          if (texto.trim() === "DIAGN√ìSTICO" && !elemento.dataset.hidden) {
            elemento.style.setProperty("display", "none", "important");
            elemento.style.setProperty("visibility", "hidden", "important");
            elemento.style.setProperty("opacity", "0", "important");
            elemento.style.setProperty("height", "0", "important");
            elemento.style.setProperty("overflow", "hidden", "important");
            elemento.dataset.hidden = "true";
            modificacoes++;
            console.log("üóëÔ∏è DIAGN√ìSTICO escondido");
          }

          // Destaca ADMINISTRA√á√ÉO
          if (
            texto.trim() === "ADMINISTRA√á√ÉO" &&
            !elemento.dataset.highlighted
          ) {
            elemento.style.setProperty(
              "background",
              "linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)",
              "important",
            );
            elemento.style.setProperty("border-radius", "12px", "important");
            elemento.style.setProperty("padding", "16px", "important");
            elemento.style.setProperty("margin", "8px", "important");
            elemento.style.setProperty("color", "#1f2937", "important");
            elemento.style.setProperty("font-weight", "bold", "important");
            elemento.style.setProperty(
              "box-shadow",
              "0 4px 20px rgba(251, 191, 36, 0.3)",
              "important",
            );
            elemento.dataset.highlighted = "true";
            modificacoes++;
            console.log("‚≠ê ADMINISTRA√á√ÉO destacada");
          }
        });

        if (modificacoes > 0) {
          console.log(`‚úÖ ${modificacoes} modifica√ß√µes aplicadas`);
        }
      }

      // Observer para mudan√ßas no DOM
      const observer = new MutationObserver((mutations) => {
        let shouldModify = false;

        mutations.forEach((mutation) => {
          if (mutation.type === "childList") {
            mutation.addedNodes.forEach((node) => {
              if (node.nodeType === 1) {
                // Element node
                const text = node.textContent || "";
                if (
                  text.includes("DIAGN√ìSTICO") ||
                  text.includes("ADMINISTRA√á√ÉO")
                ) {
                  shouldModify = true;
                }
              }
            });
          }
        });

        if (shouldModify) {
          setTimeout(modificarDOM, 100);
        }
      });

      // Inicia observa√ß√£o
      if (document.body) {
        observer.observe(document.body, {
          childList: true,
          subtree: true,
        });
      }

      // Tenta interceptar React constantemente
      const reactInterval = setInterval(() => {
        if (!isReactReady) {
          interceptReact();
        } else {
          clearInterval(reactInterval);
        }
      }, 100);

      // Modifica√ß√£o DOM constante
      setInterval(modificarDOM, 1000);

      // Execu√ß√µes iniciais
      setTimeout(interceptReact, 100);
      setTimeout(modificarDOM, 500);
      setTimeout(modificarDOM, 2000);
      setTimeout(modificarDOM, 5000);

      document.addEventListener("DOMContentLoaded", () => {
        interceptReact();
        modificarDOM();
        observer.observe(document.body, {
          childList: true,
          subtree: true,
        });
      });
    </script>

    <script type="module" crossorigin src="/assets/index-DnEsHg1H.js"></script>
    <link rel="stylesheet" crossorigin href="/assets/index-DFdR-byQ.css" />
  </head>
  <body>
    <div id="root"></div>

    <script>
      // Essential protection and service worker
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker.register("/sw.js");
      }

      // Auto-redirect removed to prevent 404 errors
    </script>
  </body>
</html>
